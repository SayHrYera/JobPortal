@model JobPortal.Models.Jobs

@{
    ViewData["Title"] = "Chỉnh sửa Công việc";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="bradcam_area bradcam_bg_1">
    <div class="container">
        <div class="row">
            <div class="col-xl-12">
                <div class="bradcam_text">
                    <h3>Chỉnh sửa Công việc</h3>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white text-center">
                    <h2>Chỉnh sửa Công việc</h2>
                </div>
                <div class="card-body">
                    <form asp-action="EditJob" enctype="multipart/form-data" method="post" id="jobPostForm">
                        <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>
                        <input type="hidden" asp-for="JobId" />

                        <div class="form-group">
                            <label for="Title">Tiêu đề công việc</label>
                            <input asp-for="Title" class="form-control" placeholder="Nhập tiêu đề công việc" />
                            <span asp-validation-for="Title" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="JobCategoryId">Danh sách công việc</label>
                            @Html.DropDownList("JobCategoryId", ViewBag.Categories as SelectList, "-- Select Category --", new { @class = "form-control", required = "required" })
                            <span asp-validation-for="JobCategoryId" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="Description">Mô tả công việc</label>
                            <textarea asp-for="Description" class="form-control" placeholder="Mô tả chi tiết công việc" rows="5"></textarea>
                            <span asp-validation-for="Description" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="Experience">Chuyên ngành</label>
                            <textarea asp-for="Experience" class="form-control" placeholder="Mô tả chi tiết công việc" rows="5"></textarea>
                            <span asp-validation-for="Experience" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="Qualification">Bằng cấp</label>
                            <input asp-for="Qualification" class="form-control" placeholder="Bằng cấp yêu cầu" />
                            <span asp-validation-for="Qualification" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="Experience">Kinh nghiệm</label>
                            <input asp-for="Experience" class="form-control" placeholder="Số năm kinh nghiệm yêu cầu" />
                            <span asp-validation-for="Experience" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="Skill">Kỹ năng</label>
                            <input asp-for="Skill" class="form-control" placeholder="Các kỹ năng cần có" />
                            <span asp-validation-for="Skill" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="Salary">Mức lương</label>
                            <input asp-for="Salary" class="form-control" placeholder="Mức lương dự kiến" />
                            <span asp-validation-for="Salary" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="JobType">Loại công việc</label>
                            <select asp-for="JobType" class="form-control custom-select">
                                <option value="Full Time">Full Time</option>
                                <option value="Part Time">Part Time</option>
                                <option value="Remote">Remote</option>
                                <option value="Freelance">Freelance</option>
                            </select>
                            <span asp-validation-for="JobType" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="CountryId">Quốc gia</label>
                            @Html.DropDownList("CountryId", ViewBag.Country as SelectList, "-- Select Category --", new { @class = "form-control", required = "required" })
                            <span asp-validation-for="CountryId" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="City">Thành phố</label>
                            <input asp-for="City" class="form-control" placeholder="Thành phố làm việc" />
                            <span asp-validation-for="City" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="LastDateToApply">Hạn chót nộp đơn</label>
                            <input asp-for="LastDateToApply" class="form-control" type="date" />
                            <span asp-validation-for="LastDateToApply" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="NoOfPost">Số lượng tuyển dụng</label>
                            <input asp-for="NoOfPost" class="form-control" placeholder="Số lượng vị trí cần tuyển" />
                            <span asp-validation-for="NoOfPost" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="CompanyImage">Ảnh công việc</label>
                            <input asp-for="CompanyImage" type="file" class="form-control" name="imgFile" />
                            <span asp-validation-for="CompanyImage" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label for="State">Trạng thái</label>
                            <select asp-for="State" class="form-control" required>
                                <option value="">-- Trạng thái --</option>
                                <option value="Mới">Mới</option>
                                <option value="Đang mở">Đang mở</option>
                                <option value="Đã đóng">Đã đóng</option>
                                <option value="Đã hủy">Đã hủy</option>
                            </select>
                            <span asp-validation-for="State" class="text-danger"></span>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn btn-success">Cập nhật</button>
                            <a href="@Url.Action("Workmanagement", "Employer")" class="btn btn-secondary">Quay lại</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
<script>
    document.getElementById('jobPostForm').addEventListener('submit', function (e) {
        var deadlineInput = document.getElementById('LastDateToApply');
        var deadline = new Date(deadlineInput.value);
        var now = new Date();

        if (deadline <= now) {
            e.preventDefault();
            alert('Thời gian hạn chót phải lớn hơn thời gian hiện tại.');
        }
    });
</script>
